;(function(e){window.CKBrowser=function(){var t=null,n=function(e,t){CKBrowser.editorInstance=e;e.addCommand("browserDialog",new CKEDITOR.dialogCommand("browserDialog"));e.ui.addButton("CKBrowser",{label:Drupal.settings.CKBrowser.wysiwygButtonLabel||"Browse",command:"browserDialog",icon:t.path+"add.png"});CKEDITOR.dialog.addIframe("browserDialog",Drupal.settings.CKBrowser.wysiwygButtonLabel||"Browse",Drupal.settings.CKBrowser.browserView.path+"?"+Drupal.settings.CKBrowser.styler.parameterName+"="+Drupal.settings.CKBrowser.styler.parameterValue,400,400,function(){},{onOk:function(){CKBrowser.defaultOnOk(e,t)}})},r=function(t,n){var r=null,i=null,s=t.getSelection(),o=t.document.createElement("a"),u=e(".cke_dialog_ui_iframe");i=u.contents().find("a.selected").clone();o.setAttribute("href",i.attr("href"));r=s.getSelectedText()||i.html();o.setHtml(r);t.insertElement(o)};return{editorInstance:t,defaultInit:n,defaultOnOk:r}}();CKEDITOR.plugins.add("drupal_ck_browser",{init:function(e,t){CKBrowser.defaultInit(e,this)}})})(jQuery)